# for more information on solrmarc mappings, 
#  see http://code.google.com/p/solrmarc/w/list 
#
# GenericBlacklight uses these conventions, mostly. 
#   _t for indexed fields (for searching)
#   _display for stored fields (for display in UI)
#   _facet for facet fields 
#   _sort for sorting fields (fields used to sort results)
#
#   see jetty/solr/conf/schema.xml in Blacklight demo project
#   see http://blacklight.rubyforge.org/  DEMO_README file

id = 001, first
marc_display_tesi = FullRecordAsXML
text_tesi = custom, getAllSearchableFields(100, 900)

language_facet_tesim = 008[35-37]:041a:041d, language_map.properties
# format is for facet, display, and selecting partial for display in show view
format_tesi = 000[6-7]:000[6], (map.format), first
marc_resource_ssim = 007[0-1]:007[0], (map.format_type), first
isbn_ssim = 020a, (pattern_map.isbn_clean)
issn_ssim = 022a
lccn_ssim = 010a
oclc_ssim = 019a:035a
other_standard_ids_ssim = 024a
publisher_number_ssim = 028a
material_type_display_tesim = custom, removeTrailingPunct(300aa)

# Title fields
#    primary title 
title_tesim = 245a
title_display_tesim = custom, removeTrailingPunct(245a)
title_vern_display_tesim = 245a
#    subtitle
subtitle_t = 245b
subtitle_display_tesim = custom, removeTrailingPunct(245b)
subtitle_vern_display_tesim = 245b
#    additional title fields
title_abbr_tesi = 210ab
title_addl_tesim = 130[a-z]:240[a-gk-s]:243[a-gk-s]
title_added_entry_tesim = 700[gk-pr-t]:710[fgk-t]:711fgklnpst:730[a-gk-t]:740anp
title_enhanced_tesim = 505[a-su-z]
title_former_tesim = 247[a-gnp]
title_graphic_tesim = 880[a-z]
title_host_item_tesim = 773[a-z]:774[a-z]
title_key_tesi = 222ab
# title_preceding_entry_ssim = custom, getLinkedFieldCombined(76[0-9]:78[0-9]) Commenting out because this field
# will cause errors when importing since we don't yet know how to deal with 76X and 78X fields. Refer:
# https://app.zenhub.com/workspaces/blacklight-catalog-5f5f84a8a6d29939a0bc5d78/issues/emory-libraries/blacklight-catalog/92
title_series_tesim = 440anpv:490av:800[a-z]:810[a-z]:811[a-z]:830[a-z]:840[a-z]
title_ssort = custom, getSortableTitle
title_translation_tesim = 242[a-z]:505t:740[a-z]
title_varying_tesim = 246[a-gnp]

# Author fields
author_tesim = 100abcegqu:110abcdegnu:111acdegjnqu
author_addl_tesim = 700abcegqu:710abcdegnu:711acdegjnqu
author_display_tesim = custom, removeTrailingPunct(100abcdq:110[a-z]:111[a-z])
author_vern_display_tesim = 100abcdq:110[a-z]:111[a-z]
# New solrmarc version does not recognize getSortableAuthor. Find another method.
# author_ssort = custom, getSortableAuthor

# Subject fields
subject_tesim = 600[a-u]:610[a-u]:611[a-u]:630[a-t]:650[a-e]:651ae:653aa:654[a-e]:655[a-c]
subject_addl_tesim = 600[v-z]:610[v-z]:611[v-z]:630[v-z]:650[v-z]:651[v-z]:654[v-z]:655[v-z]
subject_topic_facet_tesim = custom, removeTrailingPunct(600abcdq:610ab:611ab:630aa:650aa:653aa:654ab:655ab)
subject_era_facet_tesim = custom, removeTrailingPunct(650y:651y:654y:655y)
subject_geo_facet_tesim = custom, removeTrailingPunct(651a:650z)

# Publication fields
published_display_tesim = custom, removeTrailingPunct(260a)
published_vern_display_tesim = 260a
# used for facet and display, and copied for sort
pub_date_tesi = custom, getPublicationDate

# Call Number fields
lc_callnum_display_ssi = 050ab, first
lc_1letter_facet_tesi = 050a[0], callnumber_map.properties, first
lc_alpha_facet_tesi = 050a, (pattern_map.lc_alpha), first
lc_b4cutter_facet_tesi = 050a, first

# URL Fields
url_fulltext_display_tesim = custom, getFullTextUrls
url_suppl_display_tesim = custom, getSupplUrls

# Note Fields
nonformat_table_contents_tesim = 505a
summary_tesim = 520a
participant_performer_note_tesim = 511a
creation_production_credits_tesim = 508a
local_note_tesim = 590a

# MAPPINGS

# format mapping
#    leader 06-07
map.format.aa = Book
map.format.ab = Serial
map.format.ac = Book
map.format.ad = Book
map.format.ai = Serial
map.format.am = Book
map.format.an = Book
map.format.as = Serial
map.format.ta = Book
map.format.tc = Book
map.format.tm = Book
map.format.ts = Book
map.format.rm = Mixed Materials
#    leader 06
map.format.a = Book
map.format.c = Musical Score
map.format.d = Musical Score
map.format.e = Map
map.format.f = Map
map.format.g = Visual Material
map.format.i = Non-musical Recording
map.format.j = Musical Recording
map.format.k = Visual Material
map.format.m = Computer File
map.format.o = Other
#    007[0]  when it doesn't clash with above
map.format.h = Microform
map.format.q = Musical Score
map.format.v = Video
#    none of the above
map.format = Unknown

# identifying electronic resources
map.format_type.c = Electronic Resource
map.format_type.sr = Electronic Resource
map.format_type.sz = Electronic Resource
map.format_type.vr = Electronic Resource
map.format_type.vz = Electronic Resource

# if none of the above options, then physical
map.format_type = Physical Resource

pattern_map.lc_alpha.pattern_0 = ^([A-Z]{1,3})\\d+.*=>$1

pattern_map.isbn_clean.pattern_0 = ([- 0-9]*[0-9]).*=>$1
